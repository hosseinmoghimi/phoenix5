<script>
    let schools = JSON.parse(`{{schools_s|escapejs}}`)
    let schools_app = new Vue({
        el: "#schools-app",
        data: {
            schools: schools,
            title: "",
            account_id: 0,
            message: { show: false }
        },
        methods: {
            add_school: function () {
                let payload = {
                    csrfmiddlewaretoken: csrfmiddlewaretoken,
                    title: this.title,
                    account_id: this.account_id,
                }
                let url_add_school = "{% url 'school:add_school' %}"
                $.post(url_add_school, payload).done((data) => {

                    if (data.result === 'SUCCEED') {
                        schools_app.schools.push(data.school)
                        schools_app.title = ""
                        schools_app.message = { show: true, body: data.message, color: 'success' }
                        setTimeout(() => {
                            schools_app.message = { show: false }
                        }, 3000);
                    }

                    if (data.result === 'FAILED') {
                        schools_app.message = { show: true, body: message, color: 'danger' }
                        setTimeout(() => {
                            schools_app.message = { show: false }
                        }, 3000);
                    }
                })
            },
        }
    })
</script>