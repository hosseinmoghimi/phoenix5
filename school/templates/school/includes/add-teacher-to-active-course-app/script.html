<script>
    let add_teacher_to_active_course_app=new Vue({
        el:"#add-teacher-to-active-course-app",
        data:{
            search_for:"",
            teacher_id:0,
            all_teachers:JSON.parse("{{all_teachers_s|escapejs}}")
        },
        methods:{  
            filter: function () {
                this.all_teachers = all_teachers.filter(teacher => teacher.account.title.indexOf(add_teacher_to_active_course_app.search_for) > -1)
                if (this.all_teachers.length > 0) {
                    this.teacher_id = this.all_teachers[0].id
                }
            },
            add_teacher:function(){
                let payload = {
                    active_course_id: active_course_id,
                    teacher_id: this.teacher_id,
                    csrfmiddlewaretoken: csrfmiddlewaretoken
                }
                console.log(payload)
                $.post("{% url 'school:add_teacher_to_active_course' %}", payload).done((data) => {
                    if (data.result === 'SUCCEED') {
                        teachers_app.teachers.push(data.teacher)
                    }
                })
            }
        }
    })
</script>