<script>
    let menus=[]
    let menus_app=new Vue({
        el:"#menus-app",
        data:{
            menus:menus,
            title:"",
            message:{show:false}
        },
        methods:{
            add_menu:function(){
                let payload={
                    csrfmiddlewaretoken:csrfmiddlewaretoken,
                    title:this.title,
                }
                let url="{% url 'snapp:add_menu' %}"
                let posting=$.post(url,payload)
                posting.done(data=>{
                    console.log(data)
                    if(data.result=="SUCCEED"){
                        menus_app.menus.push(data.menu)
                        menus_app.message.color="success"
                        menus_app.message.body=data.message
                        menus_app.message.show=true
                        setTimeout(() => {
                            menus_app.message.show=false
                            
                        }, 3000);
                    }

                    if(data.result=="FAILED"){
                        menus_app.message.color="danger"
                        menus_app.message.body=data.message
                        menus_app.message.show=true
                        setTimeout(() => {
                            menus_app.message.show=false
                            
                        }, 3000);
                    }
                })
            }
        }
    })
</script>