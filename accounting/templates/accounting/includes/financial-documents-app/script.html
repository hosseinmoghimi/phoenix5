{% load static %}

<script src="{% static 'persian/moment.js' %}"></script>
<script src="{% static 'persian/moment-jalaali.js' %}"></script>
<script src="{% static 'persian/vue-persian-datetime-picker-browser.js' %}"></script>

<script>
    let rest_ = parseInt("{{rest}}")
    let financial_documents = JSON.parse(`{{financial_documents_s|escapejs}}`)
    let financial_documents_app_methods={}
    let financial_documents_app_data={}
</script>
 

<script>

    financial_documents_app_data = {
        financial_documents: financial_documents,

    }
    financial_documents_app_methods = {
        get_print_url: () => {
            return "sdasdas"
        },
        get_excel_url: () => {
            return "sdasdas"
        },
        to_price: function (vall, curr) {
            return to_price(vall, curr)
        },
        sum_bestankar: function () {
            let sum = 0
            this.financial_documents.forEach(financial_document => {
                sum += financial_document.bestankar
            })
            return this.to_price(sum)
        },
        sum_bedehkar: function () {
            let sum = 0
            this.financial_documents.forEach(financial_document => {
                sum += financial_document.bedehkar
            })
            return this.to_price(sum)
        },
        rest: function () {
            let rest = 0
            this.financial_documents.forEach(financial_document => {
                rest -= financial_document.bedehkar
                rest += financial_document.bestankar
            })
            return rest
        },
    }
</script>
 
<script>
    let financial_documents_app = new Vue({
        el: "#financial-documents-app",
        data: financial_documents_app_data,
        components: {
            DatePicker: VuePersianDatetimePicker

        },
        methods: financial_documents_app_methods,
    })
</script>