<script>
    let item_categories_app = new Vue({
        el: "#item-categories-app",
        data: {
            // category_title: "{{product_or_service.category_title}}",
            item_categories: JSON.parse("{{item_categories_s|escapejs}}"),
            // product_or_service_category_get_absolute_url: "{{product_or_service.product_or_service_category_id}}",
            waiting: false,
            all_categories:JSON.parse("{{all_categories_s|escapejs}}"),
            edit: false,
            category_id:"",
        },
        methods: {
            add_item_category: function () {
                item_categories_app.waiting = true
                let payload = {
                    csrfmiddlewaretoken: csrfmiddlewaretoken,
                    category_id: parseInt(this.category_id),
                    product_or_service_id: parseInt("{{product_or_service.pk}}"),
                }
                let url = "{% url 'accounting:add_item_category' %}"
                console.log(payload)
                $.post(url, payload).done((data) => {
                    item_categories_app.edit = false
                    item_categories_app.waiting = false
                    console.log(data)
                    if (data.result === 'SUCCEED') {
                        
                        item_categories_app.item_categories = data.item_categories
                        // category_title_app.product_or_service_category_id = data.product_or_service_category_id
                        // category_title_app.product_or_service_category_title = data.product_or_service_category_title
                    }
                })
            }
        }
    })
</script>