{% extends "authentication/layout.html" %}

{% block content %}
 
<div class="row rtl">
    <div class="col-md-4">
        <div class="card">
            <div class="card-body">
                <div class="text-center">
                    <img src="{{selected_profile.image}}" width="192" class="rounded-circle" alt="">

                </div>

                <h5 class="text-center my-2">

                    {{selected_profile.name}}
                </h5>
                {% if selected_profile.bio %}
                <p class="text-center my-0 text-muted">
                    <small>

                        {{profile.bio}}
                    </small>
                </p>
                {% endif %}

                {% if selected_profile.mobile %}

                <h5 class="text-center my-2">
                    <a href="tel:{{selected_profile.mobile}}">
                        <span class="text-info ">

                            {{selected_profile.mobile}}
                        </span>
                    </a>
                </h5>
                {% endif %}

                {% if selected_profile.email %}

                <h6 class="text-center my-2">
                    <a href="mailto:{{selected_profile.email}}">
                        <span class="text-info ">

                            {{selected_profile.email}}
                        </span>
                    </a>
                </h6>
                {% endif %}






            </div>
        </div>
        <div class="card">
            <div class="card-body">


                <h5 class="text-center">

                    {{selected_profile.user.username}}
                </h5>


                <div class="text-center farsi">


                    {% if perms.authentication.change_profile %}


                    <a href="{% url 'authentication:login_as' pk=selected_profile.id %}" title="ورود"
                        class="mx-2 text-info"><i class="fa fa-key text-success" aria-hidden="true"></i></a>

                    {% endif %}

                    {% if perms.authentication.change_profile or profile_is_me %}


                    <a href="{% url 'authentication:sessions' pk=selected_profile.id %}" title="جلسه ها"
                        class="mx-2 text-danger"><i class="fa fa-calendar text-info" aria-hidden="true"></i></a>

                    {% endif %}


                    <a href="{% url 'authentication:change_password' %}" title="تغییر دادن پسورد"
                    class="mx-2 "><i class="fa fa-key text-warning" aria-hidden="true"></i></a>


                    {% if can_edit_profile %}




                    <a href="{{selected_profile.get_edit_page_url}}" title="ویرایش" class="mx-2 text-warning"><i
                            class="fa fa-edit"></i></a>
                    {% endif %}



                    {% if perms.authentication.delete_profile %}
                    <a href="{{selected_profile.get_delete_url}}" target="_blank" title="حذف"
                        class="mx-2 text-danger"><i class="fa fa-trash"></i></a>
                    {% endif %}
                    {% if profile %}
                    <a href="{% url 'authentication:logout' %}" target="_blank" title="خروج"
                        class="mx-2 text-danger"><i class="fa fa-sign-out" aria-hidden="true"></i></a>
                    {% endif %}
                </div>

            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <div class="text-center farsi">

                    <a href="{% url 'core:pages_permissions' pk=selected_profile.id %}" title="login_as"
                        class="mx-2 text-info"><i class="fa fa-edit"></i>
                        صفحه های
                        در دسترس
                    </a>
                </div>
            </div>

        </div>
    </div>

    {% if not selected_profile.enabled %}
    <div class="col-md-8">
        <div class="card">
            <div class="card-body">
                <div class="farsi alert alert-danger text-right">

                    حساب کاربری غیر فعال می باشد.
                </div>
            </div>
        </div>
    </div>


    {% endif %}

    {% if employees %}

    <div class="col-md-4">
        {% include "organization/includes/employees-app/template.html" %}

    </div>
    {% endif %}

    {% if profile_contacts %}

    <div class="col-md-4">
        {% include "authentication/includes/profile-contacts-app/template.html" %}

    </div>
    {% endif %}


    {% if aaa and transport_app_is_installed and perms.authentication.change_profile%}


    <div class="col-md-4">
        <div class="card" id="create-account-app">
            <div class="card-body">
                <div>
                    <button @click="create_driver({{selected_profile.id}})" class="btn btn-success btn-block">
                        <i class="fa fa-user"></i>
                        افزودن راننده
                    </button>

                    <button @click="create_passenger({{selected_profile.id}})" class="btn btn-success btn-block">
                        <i class="fa fa-user"></i>
                        افزودن مسافر
                    </button>

                    <button @click="create_client({{selected_profile.id}})" class="btn btn-success btn-block">
                        <i class="fa fa-user"></i>
                        افزودن مشتری حمل و نقل
                    </button>

                </div>
            </div>
        </div>
    </div>

    {% endif %}

    {% if profiles %}

    <div class="col-md-4">
        {% include "authentication/includes/profiles-app/template.html" %}

    </div>
    {% endif %}

    {% if accounts %}

    <div class="col-md-12">
        {% include "accounting/includes/accounts-app/template.html" %}
    </div>

    {% endif %}
    <div class="col-md-12">
        {% include "core/includes/page-like-app/page-likes.html" %}

    </div>
    {% if resumes %}
      <div class="col-md-12">
        {% include "resume/fa/includes/resumes-app/template.html" %}

      </div>
    {% endif %}

</div>
{% endblock content %}

{% block script %}
{% include "authentication/includes/profile-contacts-app/script.html" %}

{% include "accounting/includes/accounts-app/script.html" %}
{% include "organization/includes/employees-app/script.html" %}
{% if profiles %}
{% include "authentication/includes/profiles-app/script.html" %}
{% endif %}

{% if transport_app_is_installed %}
<script>
    let create_account_app = new Vue({
        el: "#create-account-app",
        data: {

        },
        methods: {
            create_driver: function (profile_id) {
                console.log("create_driver")
                console.log(profile_id)
            },
            create_passenger: function (profile_id) {
                console.log("create_passenger")
                console.log(profile_id)

            },
            create_client: function (profile_id) {
                console.log("create_client")
                console.log(profile_id)

            },
        }
    })
</script>
{% endif %}


{% if resumes %}
  {% include "resume/fa/includes/resumes-app/script.html" %}

{% endif %}


{% endblock script %}